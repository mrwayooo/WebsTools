<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebsTools Hub - 5 in 1</title>
    <style>
        /* --- CSS: ออกแบบให้ทันสมัยและรองรับมือถือ --- */
        :root {
            --primary: #4361ee;
            --success: #2ecc71;
            --bg: #f8f9fa;
            --text: #2b2d42;
        }

        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { background: white; width: 100%; max-width: 480px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); height: fit-content; }
        
        h1 { text-align: center; font-size: 26px; margin-bottom: 20px; color: var(--primary); }

        /* Tabs System */
        .tabs { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; background: #eee; padding: 5px; border-radius: 12px; margin-bottom: 20px; }
        .tab-btn { padding: 10px; text-align: center; cursor: pointer; border-radius: 8px; font-size: 13px; font-weight: 600; color: #666; transition: 0.3s; border: none; background: none; }
        .tab-btn.active { background: white; color: var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .tool-content { display: none; animation: fadeIn 0.3s ease; }
        .tool-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* UI Elements */
        input, select { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #edf2f4; border-radius: 10px; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--primary); }
        button { width: 100%; padding: 14px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.2s; }
        .btn-main { background: var(--primary); color: white; }
        .btn-main:hover { opacity: 0.9; }
        .btn-dl { background: var(--success); color: white; display: none; margin-top: 15px; }

        .result-box { text-align: center; margin-top: 20px; }
        .result-img { max-width: 100%; border-radius: 12px; border: 1px solid #eee; display: none; margin: 0 auto; }

        /* Password Tools */
        .strength-bar { height: 8px; background: #eee; border-radius: 5px; margin: 10px 0; overflow: hidden; }
        .strength-fill { height: 100%; width: 0%; transition: 0.5s; }
        .options { text-align: left; font-size: 14px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>WebsTools Hub</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab(this, 'qr-tool')">QR Code</button>
        <button class="tab-btn" onclick="openTab(this, 'yt-tool')">YouTube</button>
        <button class="tab-btn" onclick="openTab(this, 'pass-check')">Strength</button>
        <button class="tab-btn" onclick="openTab(this, 'pass-gen')">Pass Gen</button>
        <button class="tab-btn" onclick="openTab(this, 'text-tool')">Counter</button>
    </div>

    <div id="qr-tool" class="tool-content active">
        <input type="text" id="qrInput" placeholder="Enter URL or Text">
        <button class="btn-main" onclick="genQR()">Generate QR</button>
        <div class="result-box">
            <img id="qrImg" class="result-img">
            <button id="dlQR" class="btn-dl" onclick="downloadImg('qrImg', 'qrcode.png')">Download QR</button>
        </div>
    </div>

    <div id="yt-tool" class="tool-content">
        <input type="text" id="ytInput" placeholder="Paste YouTube Link">
        <button class="btn-main" onclick="genYT()">Get Thumbnail</button>
        <div class="result-box">
            <img id="ytImg" class="result-img">
            <button id="dlYT" class="btn-dl" onclick="downloadImg('ytImg', 'thumbnail.jpg')">Download Thumbnail</button>
        </div>
    </div>

    <div id="pass-check" class="tool-content">
        <input type="password" id="checkInp" placeholder="Type to check..." oninput="checkStrength()">
        <div class="strength-bar"><div id="strengthFill" class="strength-fill"></div></div>
        <p id="strengthTxt" style="font-size: 14px; font-weight: bold;"></p>
    </div>

    <div id="pass-gen" class="tool-content">
        <input type="text" id="genOut" readonly placeholder="Result Password">
        <button class="btn-main" onclick="generatePass()">Generate Random Password</button>
        <div class="options">
            Length: <span id="lenVal">12</span>
            <input type="range" id="passLen" min="6" max="30" value="12" oninput="document.getElementById('lenVal').innerText=this.value">
            <input type="checkbox" id="up" checked> Uppercase | <input type="checkbox" id="num" checked> Numbers
        </div>
    </div>

    <div id="text-tool" class="tool-content">
        <textarea id="txtInp" placeholder="Paste text here..." oninput="countText()" style="width:100%; height:100px; padding:10px; border-radius:10px; border:2px solid #edf2f4;"></textarea>
        <p style="font-size: 14px;">Chars: <span id="cCount">0</span> | Words: <span id="wCount">0</span></p>
    </div>
</div>

<script>
    /* --- JavaScript Logic (วางไว้ล่างสุดเพื่อให้ทำงานได้แน่นอน) --- */

    // แก้ไข Error: openTab is not defined
    function openTab(btn, tabId) {
        // ซ่อนทุกอัน
        const contents = document.querySelectorAll('.tool-content');
        contents.forEach(c => c.classList.remove('active'));
        // เอาสีปุ่มออก
        const tabs = document.querySelectorAll('.tab-btn');
        tabs.forEach(t => t.classList.remove('active'));
        // เปิดอันที่เลือก
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
    }

    // QR Code
    function genQR() {
        const val = document.getElementById('qrInput').value;
        if(!val) return alert("Please enter text");
        const img = document.getElementById('qrImg');
        const dl = document.getElementById('dlQR');
        img.src = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(val)}`;
        img.style.display = "block";
        img.onload = () => dl.style.display = "block";
    }

    // YouTube
    function genYT() {
        const url = document.getElementById('ytInput').value;
        let id = "";
        if(url.includes("v=")) id = url.split("v=")[1].substring(0, 11);
        else if(url.includes("be/")) id = url.split("be/")[1].substring(0, 11);
        
        if(id) {
            const img = document.getElementById('ytImg');
            const dl = document.getElementById('dlYT');
            img.src = `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
            img.style.display = "block";
            img.onload = () => dl.style.display = "block";
        } else { alert("Link invalid"); }
    }

    // Download Function
    async function downloadImg(id, name) {
        const img = document.getElementById(id);
        const res = await fetch(img.src);
        const blob = await res.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url; a.download = name;
        document.body.appendChild(a); a.click();
        document.body.removeChild(a);
    }

    // Password Strength
    function checkStrength() {
        const p = document.getElementById('checkInp').value;
        const fill = document.getElementById('strengthFill');
        const txt = document.getElementById('strengthTxt');
        let s = 0;
        if(p.length > 8) s++;
        if(/[A-Z]/.test(p)) s++;
        if(/[0-9]/.test(p)) s++;
        if(/[^A-Za-z0-9]/.test(p)) s++;
        
        const colors = ["#ff4d4d", "#ffa64d", "#ffdb4d", "#2ecc71"];
        const labels = ["Too Weak", "Fair", "Good", "Strong"];
        fill.style.width = (p.length === 0 ? 0 : (s+1)*25) + "%";
        fill.style.background = colors[s];
        txt.innerText = p ? labels[s] : "";
        txt.style.color = colors[s];
    }

    // Random Password
    function generatePass() {
        const len = document.getElementById('passLen').value;
        let charset = "abcdefghijklmnopqrstuvwxyz";
        if(document.getElementById('up').checked) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        if(document.getElementById('num').checked) charset += "0123456789";
        let res = "";
        for(let i=0; i<len; i++) res += charset.charAt(Math.floor(Math.random() * charset.length));
        document.getElementById('genOut').value = res;
    }

    // Text Counter
    function countText() {
        const t = document.getElementById('txtInp').value;
        document.getElementById('cCount').innerText = t.length;
        document.getElementById('wCount').innerText = t.trim() ? t.trim().split(/\s+/).length : 0;
    }
</script>

</body>
</html>
