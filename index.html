<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebsTools Hub</title>
    <style>
        :root {
    --primary-color: #4361ee;
    --secondary-color: #3f37c9;
    --success-color: #4cc9f0;
    --bg-color: #f8f9fa;
    --card-bg: #ffffff;
    --text-main: #2b2d42;
    --text-muted: #8d99ae;
}

body {
    font-family: 'Inter', -apple-system, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-main);
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.container {
    background: var(--card-bg);
    width: 90%;
    max-width: 450px;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.05);
}

h1 {
    text-align: center;
    font-size: 24px;
    margin-bottom: 25px;
    letter-spacing: -1px;
}

/* Tab Styling */
.tabs {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
    background: #f1f3f5;
    padding: 5px;
    border-radius: 12px;
    margin-bottom: 30px;
}

.tab-btn {
    padding: 10px 5px;
    text-align: center;
    cursor: pointer;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-muted);
    transition: all 0.3s ease;
}

.tab-btn.active {
    background: white;
    color: var(--primary-color);
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

/* Input & Button Styling */
input {
    width: 100%;
    padding: 14px 18px;
    border: 2px solid #edf2f4;
    border-radius: 12px;
    font-size: 15px;
    transition: all 0.3s ease;
    box-sizing: border-box;
    margin-bottom: 15px;
}

input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.1);
}

button {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, background 0.3s;
}

button:active {
    transform: scale(0.98);
}

.btn-gen {
    background: var(--primary-color);
    color: white;
}

.btn-gen:hover {
    background: var(--secondary-color);
}

.btn-down {
    background: #edf2f4;
    color: var(--text-main);
    margin-top: 15px;
    display: none;
}

.btn-down:hover {
    background: #e2e8f0;
}

/* Result Area */
#qr-box, #yt-box {
    margin-top: 25px;
    text-align: center;
}

.result-img {
    max-width: 100%;
    border-radius: 12px;
    display: none;
    margin: 0 auto;
}

/* Password Strength Meter */
.strength-bar {
    height: 8px;
    background: #edf2f4;
    border-radius: 10px;
    margin: 15px 0 5px;
    overflow: hidden;
}

.strength-fill {
    height: 100%;
    width: 0%;
    transition: width 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
    </style>
</head>
<body>

<div class="container">
    <h1>WebsTools Hub</h1>
    
    <div class="tabs">
        <div class="tab-btn active" onclick="openTab('qr-tool')">QR Code</div>
        <div class="tab-btn" onclick="openTab('yt-tool')">YouTube</div>
        <div class="tab-btn" onclick="openTab('pass-tool')">Password</div>
    </div>

   <div id="qr-tool" class="tool-content active">
    <h2>QR Generator</h2>
    <input type="text" id="qrInput" placeholder="Enter URL or Text">
    <button class="btn-gen" onclick="genQR()">Generate QR</button>
    <div id="qr-result-box">
        <img id="qrImg" class="result-img">
        <button id="dlQR" class="btn-down" onclick="downloadImg('qrImg', 'qrcode.png')">Download QR</button>
    </div>
</div>

<div id="yt-tool" class="tool-content">
    <h2>YouTube Thumbnail</h2>
    <input type="text" id="ytInput" placeholder="Paste YouTube Link">
    <button class="btn-gen" onclick="genYT()">Get Thumbnail</button>
    <div id="yt-result-box">
        <img id="ytImg" class="result-img">
        <button id="dlYT" class="btn-down" onclick="downloadImg('ytImg', 'thumbnail.jpg')">Download Thumbnail</button>
    </div>
</div>

<script>
    // --- ฟังก์ชันหลักสำหรับการสร้างรูป (ปรับปรุงให้โชว์ปุ่มดาวน์โหลด) ---
    function genQR() {
        const val = document.getElementById('qrInput').value;
        if(!val) return alert("Please enter text");
        const img = document.getElementById('qrImg');
        const dlBtn = document.getElementById('dlQR');
        
        img.src = `https://api.qrserver.com/v1/create-qr-code/?size=500x500&data=${encodeURIComponent(val)}`;
        img.style.display = "block";
        img.onload = () => dlBtn.style.display = "block"; // โชว์ปุ่มเมื่อรูปโหลดเสร็จ
    }

    function genYT() {
        const url = document.getElementById('ytInput').value;
        let videoId = "";
        if(url.includes("v=")) videoId = url.split("v=")[1].substring(0, 11);
        else if(url.includes("be/")) videoId = url.split("be/")[1].substring(0, 11);
        
        if(videoId) {
            const img = document.getElementById('ytImg');
            const dlBtn = document.getElementById('dlYT');
            img.src = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
            img.style.display = "block";
            img.onload = () => dlBtn.style.display = "block";
        } else {
            alert("Invalid YouTube Link");
        }
    }

    // --- ฟังก์ชัน Download อเนกประสงค์ (ใช้ได้กับทุกรูป) ---
    async function downloadImg(imgId, fileName) {
        const img = document.getElementById(imgId);
        try {
            // ดึงข้อมูลรูปภาพเป็น Blob
            const response = await fetch(img.src);
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            
            // สร้างลิงก์ชั่วคราวเพื่อดาวน์โหลด
            const a = document.createElement("a");
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            
            // ล้างหน่วยความจำ
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        } catch (err) {
            alert("Download failed. Please right-click and 'Save Image As'");
            console.error(err);
        }
    }
    
    // อย่าลืมฟังก์ชัน openTab และ checkPass ตัวเดิมนะครับ
</script>

</body>
</html>
