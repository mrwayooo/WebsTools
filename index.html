<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebsTools Hub - All in One</title>
    <style>
        /* --- 1. CSS (Design) --- */
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #2b2d42;
            --muted: #8d99ae;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: var(--card);
            width: 90%;
            max-width: 450px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.05);
        }

        h1 { text-align: center; margin-bottom: 25px; letter-spacing: -1px; }

        /* Tabs */
        .tabs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            background: #f1f3f5;
            padding: 5px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--muted);
            transition: 0.3s;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .tool-content { display: none; }
        .tool-content.active { display: block; }

        /* Inputs & Buttons */
        input {
            width: 100%;
            padding: 14px;
            border: 2px solid #edf2f4;
            border-radius: 12px;
            font-size: 15px;
            box-sizing: border-box;
            margin-bottom: 15px;
            outline: none;
        }

        input:focus { border-color: var(--primary); }

        button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-gen { background: var(--primary); color: white; }
        .btn-gen:hover { background: var(--secondary); }

        .btn-down {
            background: #2ecc71;
            color: white;
            margin-top: 15px;
            display: none; /* ซ่อนไว้จนกว่าจะสร้างรูปเสร็จ */
        }

        /* Results */
        .result-box {
            margin-top: 25px;
            text-align: center;
        }

        .result-img {
            max-width: 100%;
            border-radius: 12px;
            display: none;
            margin: 0 auto;
            border: 1px solid #eee;
        }

        /* Password Strength */
        .strength-bar {
            height: 8px;
            background: #edf2f4;
            border-radius: 10px;
            margin: 15px 0 5px;
            overflow: hidden;
        }

        .strength-fill { height: 100%; width: 0%; transition: 0.5s; }
    </style>
</head>
<body>

<div class="container">
    <h1>WebsTools Hub</h1>
    
   <div class="tabs">
    <div class="tab-btn active" onclick="openTab(this, 'qr-tool')">QR Code</div>
    <div class="tab-btn" onclick="openTab(this, 'yt-tool')">YouTube</div>
    <div class="tab-btn" onclick="openTab(this, 'pass-tool')">Password</div>
    <div class="tab-btn" onclick="openTab(this, 'randpass-tool')">Random Pass</div>
</div>

    <div id="qr-tool" class="tool-content active">
        <input type="text" id="qrInput" placeholder="Enter URL or Text">
        <button class="btn-gen" onclick="genQR()">Generate QR Code</button>
        <div class="result-box">
            <img id="qrImg" class="result-img">
            <button id="dlQR" class="btn-down" onclick="downloadImg('qrImg', 'qrcode.png')">Download QR</button>
        </div>
    </div>

    <div id="yt-tool" class="tool-content">
        <input type="text" id="ytInput" placeholder="Paste YouTube Link">
        <button class="btn-gen" onclick="genYT()">Get Thumbnail</button>
        <div class="result-box">
            <img id="ytImg" class="result-img">
            <button id="dlYT" class="btn-down" onclick="downloadImg('ytImg', 'thumbnail.jpg')">Download Image</button>
        </div>
    </div>

    <div id="pass-tool" class="tool-content">
        <input type="password" id="passInput" placeholder="Type password..." oninput="checkPass()">
        <div class="strength-bar"><div id="passFill" class="strength-fill"></div></div>
        <p id="passText" style="font-size: 14px; font-weight: bold;"></p>
    </div>
    
    <div id="randpass-tool" class="tool-content">
    <input type="text" id="randomPassOutput" placeholder="Your random password" readonly style="margin-bottom: 10px;">
    <button class="btn-gen" onclick="generateRandomPassword()">Generate Password</button>

    <div style="margin-top: 20px; text-align: left;">
        <label for="passLength" style="display: block; margin-bottom: 5px;">Password Length: <span id="lengthDisplay">12</span></label>
        <input type="range" id="passLength" min="6" max="32" value="12" oninput="document.getElementById('lengthDisplay').innerText=this.value;">
        
        <div style="margin-top: 15px;">
            <input type="checkbox" id="includeUppercase" checked> <label for="includeUppercase">Include Uppercase (A-Z)</label><br>
            <input type="checkbox" id="includeLowercase" checked> <label for="includeLowercase">Include Lowercase (a-z)</label><br>
            <input type="checkbox" id="includeNumbers" checked> <label for="includeNumbers">Include Numbers (0-9)</label><br>
            <input type="checkbox" id="includeSymbols" checked> <label for="includeSymbols">Include Symbols (!@#$)</label>
        </div>
    </div>
</div>
</div>

<script>
    /* --- 2. JavaScript (Logic) --- */

    // ฟังก์ชันสลับ Tab (แก้ Error Uncaught ReferenceError)
   function openTab(element, tabId) {
    // 1. ซ่อนทุกหน้า
    const contents = document.querySelectorAll('.tool-content');
    contents.forEach(c => c.classList.remove('active'));

    // 2. เอาสีปุ่ม active ออกจากทุกปุ่ม
    const tabs = document.querySelectorAll('.tab-btn');
    tabs.forEach(t => t.classList.remove('active'));

    // 3. แสดงหน้าเลือกล่าสุด
    document.getElementById(tabId).classList.add('active');

    // 4. ใส่สีปุ่มให้กับปุ่มที่เพิ่งคลิก (ใช้ element ที่ส่งมาจาก this)
    element.classList.add('active');
}

    // สร้าง QR Code
    function genQR() {
        const val = document.getElementById('qrInput').value;
        if(!val) return alert("กรุณากรอกข้อความ");
        
        const img = document.getElementById('qrImg');
        const btn = document.getElementById('dlQR');
        
        img.src = `https://api.qrserver.com/v1/create-qr-code/?size=500x500&data=${encodeURIComponent(val)}`;
        img.style.display = "block";
        img.onload = () => btn.style.display = "block";
    }

    // ดึงปก YouTube
    function genYT() {
        const url = document.getElementById('ytInput').value;
        let id = "";
        if(url.includes("v=")) id = url.split("v=")[1].substring(0, 11);
        else if(url.includes("be/")) id = url.split("be/")[1].substring(0, 11);

        if(id) {
            const img = document.getElementById('ytImg');
            const btn = document.getElementById('dlYT');
            img.src = `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
            img.style.display = "block";
            img.onload = () => btn.style.display = "block";
        } else {
            alert("ลิงก์ YouTube ไม่ถูกต้อง");
        }
    }

    // ฟังก์ชันสร้างรหัสผ่านแบบสุ่ม
function generateRandomPassword() {
    const length = document.getElementById('passLength').value;
    const includeUppercase = document.getElementById('includeUppercase').checked;
    const includeLowercase = document.getElementById('includeLowercase').checked;
    const includeNumbers = document.getElementById('includeNumbers').checked;
    const includeSymbols = document.getElementById('includeSymbols').checked;

    let characters = '';
    if (includeUppercase) characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    if (includeLowercase) characters += 'abcdefghijklmnopqrstuvwxyz';
    if (includeNumbers) characters += '0123456789';
    if (includeSymbols) characters += '!@#$%^&*()_+{}[]|:;<>,.?/~`';

    if (characters.length === 0) {
        alert("Please select at least one character type.");
        return;
    }

    let password = '';
    for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * characters.length);
        password += characters[randomIndex];
    }

    document.getElementById('randomPassOutput').value = password;
}

// ตรวจสอบให้แน่ใจว่าฟังก์ชัน openTab ได้รับการแก้ไขแล้วตามคำแนะนำก่อนหน้านี้
// function openTab(element, tabId) { ... }

    // ตรวจสอบรหัสผ่าน
    function checkPass() {
        const pass = document.getElementById('passInput').value;
        const fill = document.getElementById('passFill');
        const text = document.getElementById('passText');
        let score = 0;

        if (pass.length > 8) score++;
        if (/[A-Z]/.test(pass)) score++;
        if (/[0-9]/.test(pass)) score++;
        if (/[^A-Za-z0-9]/.test(pass)) score++;

        const colors = ["#ff4d4d", "#ffa64d", "#ffdb4d", "#2ecc71"];
        const labels = ["สั้นเกินไป", "พอใช้", "ดี", "ปลอดภัยมาก"];
        
        if(pass === "") {
            fill.style.width = "0%";
            text.innerText = "";
        } else {
            fill.style.width = (score + 1) * 25 + "%";
            fill.style.backgroundColor = colors[score] || colors[0];
            text.innerText = labels[score] || labels[0];
            text.style.color = colors[score] || colors[0];
        }
    }

    // ฟังก์ชันดาวน์โหลด (ใช้ได้ทุกเครื่องมือ)
    async function downloadImg(imgId, fileName) {
        const img = document.getElementById(imgId);
        try {
            const res = await fetch(img.src);
            const blob = await res.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        } catch (e) {
            alert("ดาวน์โหลดไม่ได้ กรุณาคลิกขวาที่รูปแล้วเลือก Save Image As");
        }
    }
</script>

</body>
</html>
